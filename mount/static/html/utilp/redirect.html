{{ define "utilp/redirect.html" }}
<!DOCTYPE html>
<html>
	<head>
		<title>Redirecting</title>
		<link rel="stylesheet" type="text/css" href="/web/static/css/util/animations">
		<style>
			/**/
		</style>
		<script type="text/javascript" src="/web/static/js/libs/jquery-3.6.0"></script>
		<script type="text/javascript">
			var cancel = false;
			const TARGET_URL = "{{.url}}";

			function waitTime(callback, sec){
				if(cancel){
					return;
				}
				if(sec <= 0){
					$("#waitsec").text("0");
					return callback();
				}
				$("#waitsec").text(sec);
				setTimeout(()=>{ waitTime(callback, sec - 1); }, 1000);
			}

			$(document).ready(function(){
				$("#cancelbtn").click(function(){
					cancel = true;
					$("#message").text("is cancel");
				})
				waitTime(()=>{ window.location = TARGET_URL; }, 5);
			})
		</script>
	</head>
	<body>
		<p>你将要在<span id="waitsec">0</span>秒后重定向至 '{{.url}}'</p>
		<p id="message"></p>
		<p><input id="cancelbtn" type="button" value="取消跳转" /></p>
		<p>没有跳转？请单击<a href="{{.url}}">这里</a></p>
	</body>
</html>
{{ end }}